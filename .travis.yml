language: cpp
before_install: |
              if [[ "$TRAVIS_OS_NAME" != "osx" ]]; then
                if [[ "${BOOST_VERSION}" != "" ]]; then
                  BOOST_DIR=boost-${BOOST_VERSION}
                  if [[ -z "$(ls -A ${BOOST_DIR})" ]]; then
                      BOOST_URL="http://sourceforge.net/projects/boost/files/boost/${BOOST_VERSION}/boost_${BOOST_VERSION//\./_}.tar.gz"
                      mkdir -p ${BOOST_DIR}
                      { travis_retry wget -O - ${BOOST_URL} | tar --strip-components=1 -xz -C ${BOOST_DIR}; } || exit 1
                  fi
                  cd ${BOOST_DIR}
                  ./bootstrap.sh --with-libraries=filesystem,program_options,system
                  ./b2
                  CMAKE_OPTIONS+=" -DBOOST_ROOT=${BOOST_DIR}"
                fi
              fi
script:
    - chmod a+x scripts/*
    - mkdir -p build
    - cd build
    - cmake ../ -DCMAKE_BUILD_TYPE=Debug ${CMAKE_OPTIONS} && cmake --build . && ctest -V
addons:
    apt:
      sources:
        - ubuntu-toolchain-r-test
      packages:
        - cmake-data
        - cmake
        - ninja-build
matrix:
  include:
    - os: osx
    - os: linux
      dist: trusty
      sudo: required
      compiler: clang
      env:
        - CMAKE_OPTIONS=-GNinja
        - BOOST_VERSION=1.66.0
    - os: linux
      dist: trusty
      sudo: required
      compiler: gcc
      env:
        - CMAKE_OPTIONS=-GNinja
        - BOOST_VERSION=1.66.0
